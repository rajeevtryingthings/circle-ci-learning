# Use the latest 2.1 syntax.
version: 2.1

# Define a job for building and testing the .NET application.
jobs:
  build_and_test:
    # Use the official Microsoft .NET SDK image.
    # For .NET 9, you would use a tag like '9.0-sdk'.
    docker:
      - image: mcr.microsoft.com/dotnet/sdk:9.0

    steps:
      - checkout
      
      # Restore dependencies
      - run:
          name: Restore dependencies
          command: dotnet restore

      # Build the application
      - run:
          name: Build the application
          command: dotnet build --configuration Release --no-restore

      # Run tests (assuming you have a test project)
      - run:
          name: Run tests
          command: dotnet test --no-restore --verbosity normal

# Define a workflow to run the job.
workflows:
  version: 2
  build_test_and_deploy:
    jobs:
      - build_and_test
